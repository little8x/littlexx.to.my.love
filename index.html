<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>情人节快乐</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            position: relative;
        }

        /* 星空背景 */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* 流星效果 */
        .meteor {
            position: fixed;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1),
                        0 0 0 8px rgba(255, 255, 255, 0.1),
                        0 0 20px rgba(255, 255, 255, 1);
            animation: meteor 7s linear infinite;
            opacity: 0;
        }

        .meteor::before {
            content: '';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 300px;
            height: 1px;
            background: linear-gradient(90deg, white, transparent);
        }

        @keyframes meteor {
            0% {
                transform: rotate(215deg) translateX(0);
                opacity: 1;
            }
            70% {
                opacity: 1;
            }
            100% {
                transform: rotate(215deg) translateX(-1000px);
                opacity: 0;
            }
        }

        /* 开场文字 */
        .opening-text {
            font-size: 30vh;
            font-family: 'Brush Script MT', cursive;
            color: #FFD700;
            text-shadow: 
                0 0 5px rgba(255, 215, 0, 0.8),
                0 0 10px rgba(255, 215, 0, 0.6),
                0 0 15px rgba(255, 215, 0, 0.4),
                2px 2px 4px rgba(0, 0, 0, 0.3);
            text-align: center;
            position: relative;
            z-index: 2;
            opacity: 1;
            transition: opacity 1s ease;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            letter-spacing: 0.5vh;
        }

        .opening-text.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* 画布容器 */
        .canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        #heartCanvas {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* 情感叙事文字容器 */
        .story-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            text-align: center;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .story-container.visible {
            opacity: 1;
        }

        .story-text {
            font-family: 'Brush Script MT', cursive;
            font-size: 6vh;
            line-height: 1.8;
            opacity: 1;
            transform: translateY(0);
            transition: all 1s ease;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: linear-gradient(
                45deg,
                #FFD700 0%,
                #FF6B9D 25%,
                #FF1493 50%,
                #C71585 75%,
                #FFD700 100%
            );
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient 3s ease infinite;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            filter: drop-shadow(0 0 10px rgba(255, 20, 147, 0.5));
        }

        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        .story-text.fade-out {
            opacity: 0;
            transform: translateY(-20px) scale(1.1);
        }

        /* 玫瑰花瓣 */
        .petal {
            position: fixed;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            border-radius: 50% 0 50% 50%;
            animation: fall linear infinite;
            z-index: 1;
            opacity: 0.8;
        }

        @keyframes fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* 结尾爱心 */
        .heart-shape {
            position: fixed;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .heart-shape.visible {
            opacity: 1;
        }

        .heart {
            position: relative;
            width: 100px;
            height: 90px;
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        .heart::before,
        .heart::after {
            content: "";
            position: absolute;
            width: 50px;
            height: 80px;
            background: linear-gradient(135deg, #ff69b4, #ff1493);
            border-radius: 50px 50px 0 0;
        }

        .heart::before {
            left: 50px;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }

        .heart::after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* 情人节快乐文字 */
        .valentine-text {
            font-family: 'Brush Script MT', cursive;
            font-size: 5vh;
            color: #FFD700;
            text-shadow: 
                0 0 10px #FFD700,
                0 0 20px #FFD700;
            text-align: center;
            margin-top: 20px;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .valentine-text.visible {
            opacity: 1;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .opening-text {
                font-size: 20vh;
            }
            .story-text {
                font-size: 3vh;
                padding: 20px;
            }
            .heart-button {
                width: 60px;
                height: 60px;
            }
            .heart-button::after {
                font-size: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>

    <div class="canvas-container">
        <canvas id="heartCanvas"></canvas>
    </div>

    <div class="opening-text" id="openingText">to my love<br>--然然</div>

    <div class="story-container" id="storyContainer">
        <div class="story-text" id="storyText"></div>
    </div>

    <div class="heart-shape" id="heartShape">
        <div class="valentine-text" id="valentineText">情人节快乐</div>
    </div>

    <script>
        // 创建星星
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }

        // 创建流星
        function createMeteors() {
            for (let i = 0; i < 20; i++) {
                const meteor = document.createElement('div');
                meteor.className = 'meteor';
                meteor.style.left = Math.random() * 100 + '%';
                meteor.style.top = Math.random() * 50 + '%';
                meteor.style.animationDelay = Math.random() * 7 + 's';
                meteor.style.animationDuration = Math.random() * 3 + 5 + 's';
                document.body.appendChild(meteor);
            }
        }

        // 创建玫瑰花瓣
        function createPetals() {
            for (let i = 0; i < 30; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                petal.style.left = Math.random() * 100 + '%';
                petal.style.animationDuration = Math.random() * 3 + 4 + 's';
                petal.style.animationDelay = Math.random() * 5 + 's';
                document.body.appendChild(petal);
            }
        }

        // 动态画爱心
        function drawHeart() {
            const canvas = document.getElementById('heartCanvas');
            const ctx = canvas.getContext('2d');

            // 设置画布大小
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const scale = Math.min(canvas.width, canvas.height) / 35;

            // 创建两种颜色渐变
            const topGradient = ctx.createLinearGradient(centerX, centerY - scale * 16, centerX, centerY);
            topGradient.addColorStop(0, '#ff6b9d');
            topGradient.addColorStop(1, '#ff1493');

            const bottomGradient = ctx.createLinearGradient(centerX, centerY, centerX, centerY + scale * 16);
            bottomGradient.addColorStop(0, '#ff1493');
            bottomGradient.addColorStop(1, '#c71585');

            let t = 0;
            const points = [];

            // 生成爱心路径点
            for (let i = 0; i <= Math.PI * 2; i += 0.003) {
                const x = 16 * Math.pow(Math.sin(i), 3);
                const y = -(13 * Math.cos(i) - 5 * Math.cos(2 * i) - 2 * Math.cos(3 * i) - Math.cos(4 * i));
                points.push({
                    x: centerX + x * scale,
                    y: centerY + y * scale,
                    originalY: y
                });
            }

            // 找到顶点（Y值最小的点）
            const topPointIndex = points.findIndex(p => 
                p.y === Math.min(...points.map(pt => pt.y))
            );

            // 找到底点（Y值最大的点）
            const bottomPointIndex = points.findIndex(p => 
                p.y === Math.max(...points.map(pt => pt.y))
            );

            // 左半边：从顶点开始，按原始顺序向下到底点
            const leftPath = [];
            for (let i = topPointIndex; ; i = (i + 1) % points.length) {
                leftPath.push(points[i]);
                if (i === bottomPointIndex) break;
            }

            // 右半边：从顶点开始，按原始顺序向下到底点
            const rightPath = [];
            for (let i = topPointIndex; ; i = (i - 1 + points.length) % points.length) {
                rightPath.push(points[i]);
                if (i === bottomPointIndex) break;
            }

            let leftIndex = 0;
            let rightIndex = 0;
            const drawSpeed = 3;

            function animate() {
                let needsUpdate = false;

                // 绘制左侧路径（从顶点开始，向下到底点）
                if (leftIndex < leftPath.length) {
                    const point = leftPath[leftIndex];

                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 2.5, 0, Math.PI * 2);
                    ctx.fillStyle = topGradient;
                    ctx.shadowColor = '#ff6b9d';
                    ctx.shadowBlur = 20;
                    ctx.fill();

                    if (leftIndex > 0) {
                        const prevPoint = leftPath[leftIndex - 1];
                        ctx.beginPath();
                        ctx.moveTo(prevPoint.x, prevPoint.y);
                        ctx.lineTo(point.x, point.y);
                        ctx.strokeStyle = topGradient;
                        ctx.lineWidth = 4;
                        ctx.lineCap = 'round';
                        ctx.lineJoin = 'round';
                        ctx.shadowColor = '#ff6b9d';
                        ctx.shadowBlur = 15;
                        ctx.stroke();
                    }

                    leftIndex += drawSpeed;
                    needsUpdate = true;
                }

                // 绘制右侧路径（从顶点开始，向下到底点）
                if (rightIndex < rightPath.length) {
                    const point = rightPath[rightIndex];

                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 2.5, 0, Math.PI * 2);
                    ctx.fillStyle = bottomGradient;
                    ctx.shadowColor = '#c71585';
                    ctx.shadowBlur = 20;
                    ctx.fill();

                    if (rightIndex > 0) {
                        const prevPoint = rightPath[rightIndex - 1];
                        ctx.beginPath();
                        ctx.moveTo(prevPoint.x, prevPoint.y);
                        ctx.lineTo(point.x, point.y);
                        ctx.strokeStyle = bottomGradient;
                        ctx.lineWidth = 4;
                        ctx.lineCap = 'round';
                        ctx.lineJoin = 'round';
                        ctx.shadowColor = '#c71585';
                        ctx.shadowBlur = 15;
                        ctx.stroke();
                    }

                    rightIndex += drawSpeed;
                    needsUpdate = true;
                }

                // 添加闪烁效果
                if (Math.random() < 0.15) {
                    const randomPoint = points[Math.floor(Math.random() * points.length)];
                    ctx.beginPath();
                    ctx.arc(
                        randomPoint.x + (Math.random() - 0.5) * 20,
                        randomPoint.y + (Math.random() - 0.5) * 20,
                        Math.random() * 3,
                        0, Math.PI * 2
                    );
                    ctx.fillStyle = `rgba(255, 255, 255, ${Math.random() * 0.8})`;
                    ctx.shadowColor = '#ffffff';
                    ctx.shadowBlur = 10;
                    ctx.fill();
                }

                if (needsUpdate) {
                    requestAnimationFrame(animate);
                }
            }

            animate();
        }

        // 显示故事文字
        function showStory() {
            const storyText = document.getElementById('storyText');
            const storyContainer = document.getElementById('storyContainer');
            const text = "千言万语都无法表述我爱你的心,希望未来,由我们一起书写...";

            storyContainer.classList.add('visible');

            let index = 0;
            const interval = setInterval(() => {
                if (index < text.length) {
                    storyText.textContent += text.charAt(index);
                    index++;
                } else {
                    clearInterval(interval);

                    // 文字展示1秒后开始消散
                    setTimeout(() => {
                        storyText.classList.add('fade-out');

                        // 文字消散后显示爱心
                        setTimeout(() => {
                            showEnding();
                        }, 1000);
                    }, 1000);
                }
            }, 100);
        }

        // 显示结尾
        function showEnding() {
            const heartShape = document.getElementById('heartShape');
            const valentineText = document.getElementById('valentineText');

            // 先画爱心
            drawHeart();

            // 然后显示情人节快乐文字
            setTimeout(() => {
                heartShape.classList.add('visible');
                setTimeout(() => {
                    valentineText.classList.add('visible');
                }, 500);
            }, 2000);
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            createStars();
            createMeteors();

            const openingText = document.getElementById('openingText');

            // 3秒后自动开始动画
            setTimeout(() => {
                openingText.classList.add('hidden');

                setTimeout(() => {
                    showStory();
                }, 1000);
            }, 3000);
        });
    </script>
</body>
</html>
